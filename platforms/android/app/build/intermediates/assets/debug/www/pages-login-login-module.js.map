{"version":3,"sources":["webpack:///./src/app/pages/login/login.module.ts","webpack:///./src/app/pages/login/login.page.html","webpack:///./src/app/pages/login/login.page.scss","webpack:///./src/app/pages/login/login.page.ts","webpack:///./src/app/services/user.service.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPage } from './login.page';\nimport {CopyrightComponent} from '../../components/copyright/copyright.component';\nimport {CzbModule} from '../../components/czb.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    CzbModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>登录</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content no-padding>\\n  <img src=\\\"assets/img/login_title.jpg\\\" alt=\\\"\\\">\\n  <div padding-horizontal>\\n    <form #loginForm=\\\"ngForm\\\" (ngSubmit)=\\\"onLogin(loginForm)\\\">\\n      <ion-list padding-right no-margin>\\n        <ion-item lines=\\\"none\\\"></ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"fixed\\\">账号</ion-label>\\n          <ion-input name=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"手机号或者电子邮箱\\\" [(ngModel)]=\\\"username\\\"></ion-input>\\n        </ion-item>\\n        <ion-item margin-top>\\n          <ion-label position=\\\"fixed\\\">密码</ion-label>\\n          <ion-input name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"登录密码\\\" [(ngModel)]=\\\"password\\\"></ion-input>\\n        </ion-item>\\n        <ion-item no-lines></ion-item>\\n      </ion-list>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col>\\n            <ion-button expand=\\\"full\\\" color=\\\"primary\\\" type=\\\"submit\\\">登录</ion-button>\\n          </ion-col>\\n          <ion-col>\\n            <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" color=\\\"primary\\\" href=\\\"/signup\\\">注册新账号</ion-button>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col>\\n            <ion-button fill=\\\"clear\\\" size=\\\"small\\\" (click)=\\\"openForgotPassword()\\\">忘记密码？</ion-button>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row text-center>\\n          <ion-col>查看演示</ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </form>\\n  </div>\\n  <app-copyright [bottom]=\\\"'20px'\\\"></app-copyright>\\n</ion-content>\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\nimport {AlertController, MenuController, ToastController} from '@ionic/angular';\nimport {NgForm} from '@angular/forms';\nimport {Router} from '@angular/router';\nimport {UserService} from '../../services/user.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  username: string; // 视图模型的属性账号，双向绑定\n  password: string; // 视图模型的属性密码，双向绑定\n  constructor(private toastController: ToastController, private alertController: AlertController,\n              private router: Router, private userService: UserService, private menuController: MenuController) { }\n  ngOnInit() {\n  }\n  ionViewDidEnter() {\n      this.menuController.enable(false);\n  }\n  ionViewDidLeave() {\n      this.menuController.enable(true);\n  }\n  // 点击登录按钮时调用\n  async onLogin(form: NgForm) {\n      if ( this.username == undefined || this.password == undefined || this.username == '' || this.password == '' ) {\n          let toast = await this.toastController.create({\n              message: '请输入您的手机号码或者邮箱',\n              duration: 3000\n          });\n          toast.present();\n      } else {\n          if (!this.userService.login(this.username, this.password)) {\n              let alert =await this.alertController.create({\n                  header: '提示',\n                  message: '用户名或者密码不正确',\n                  buttons: ['确定']\n              });\n              alert.present();\n          } else {\n              this.router.navigateByUrl('/tabs');\n          }\n      }\n  }\n  // 点击忘记密码时调用\n  openForgotPassword() {\n      // 进入找回密码页面\n      this.router.navigateByUrl('forgotPassword');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {AjaxResult} from '../shared/ajax-result';\nimport {Register} from '../shared/register';\nimport {LocalStorageService} from './local-storage.service';\nimport {Events} from '@ionic/angular';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(private localStorageService: LocalStorageService, public events: Events, private http: HttpClient) { }\n\n  signup(register: Register): Promise<AjaxResult> {\n    return new Promise(((resolve, reject) => {\n      // resolve\n    }));\n  }\n  async signup1(register: Register) {\n    let user = {\n      shopName: register.shopName,\n      phone: register.phone,\n      email: register.email,\n      accounts: {phone: register.phone, passwordToken: register.password},\n      registerDate: new Date().toISOString().replace(/T/g, ' ').replace(/\\.[\\d]{3}Z/, ''),\n      shortName: '',\n      owner: '',\n      shopPhone: '',\n      businessType: ''\n    };\n    let u = this.localStorageService.get('user', []);\n    u.push(user);\n    this.localStorageService.set('user', u);\n  }\n  login(username: string, password: string): boolean {\n      let url = 'http://114.115.155.218:8080/login/account';\n      this.http.post(url, {\n          'userName': username,\n          'password': password\n      }).toPromise().then(response => {\n          let res = response;\n          console.log(res);\n      });\n      let user = this.localStorageService.get('user', null);\n      console.log(user);\n      if (user != null) {\n          for (let u of user) {\n            if (u.accounts.phone == username && u.accounts.passwordToken == password) {\n                this.localStorageService.set('login', u);\n                this.events.publish('user:created',u, Date.now());\n                return true;\n            }\n          }\n      }\n      return false;\n  }\n  // 修改密码\n  update(phone: string, password: string): boolean {\n      let user = this.localStorageService.get('user', null);\n      if ( user != null ) {\n          for (let u of user) {\n              if (u.phone == phone) {\n                  u.accounts.passwordToken = password;\n                  break;\n              }\n          }\n          this.localStorageService.set('user', user);\n          return true;\n      }\n      return false;\n  }\n  // 判断手机号是否已经存在\n  check(phone: string): boolean {\n      let user = this.localStorageService.get('user', null);\n      if (user != null) {\n          for (let u of user) {\n              if (u.phone == phone) {\n                  return true;\n              }\n          }\n      }\n      return false;\n  }\n}\n"],"sourceRoot":""}