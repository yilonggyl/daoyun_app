{"version":3,"sources":["webpack:///./src/app/pages/forgot-password/forgot-password.module.ts","webpack:///./src/app/pages/forgot-password/forgot-password.page.html","webpack:///./src/app/pages/forgot-password/forgot-password.page.scss","webpack:///./src/app/pages/forgot-password/forgot-password.page.ts"],"names":[],"mappings":"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","file":"pages-forgot-password-forgot-password-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ForgotPasswordPage } from './forgot-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ForgotPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ForgotPasswordPage]\n})\nexport class ForgotPasswordPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"light\\\" (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>返回\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>找回密码</ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    1、输入邮箱或者手机号>2、输入验证码>3、重置密码\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-slides  #forgotPasswordSlides>\\n    <ion-slide>\\n        <form (ngSubmit)=\\\"onSendPhone()\\\" #forgotPasswordForm=\\\"ngForm\\\" novalidate>\\n          <ion-list>\\n            <ion-item>\\n              <ion-label position=\\\"fixed\\\">邮箱/手机</ion-label>\\n              <ion-input name=\\\"forgotPhone\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.forgotPhone\\\"></ion-input>\\n            </ion-item>\\n            <div padding-horizontal>\\n              <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"forgotPasswordForm.invalid\\\">提交</ion-button>\\n            </div>\\n          </ion-list>\\n        </form>\\n    </ion-slide>\\n    <ion-slide>\\n      <form (ngSubmit)=\\\"onSendCode()\\\" #codeForm=\\\"ngForm\\\" novalidate>\\n        <ion-list>\\n          <ion-item>\\n            <ion-label position=\\\"fixed\\\">验证码</ion-label>\\n            <ion-input name=\\\"code\\\" type=\\\"text\\\" required [(ngModel)]=\\\"user.code\\\"></ion-input>\\n          </ion-item>\\n          <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"codeForm.submitted\\\">\\n            <p [hidden]=\\\"codeIsRight\\\" padding-start>您输入的验证码不正确</p>\\n          </ion-text>\\n          <div padding-horizontal>\\n            <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"codeForm.invalid\\\">提交</ion-button>\\n          </div>\\n        </ion-list>\\n      </form>\\n    </ion-slide>\\n    <ion-slide>\\n      <form (ngSubmit)=\\\"onSendPwd()\\\" #pwdForm=\\\"ngForm\\\" novalidate>\\n        <ion-list>\\n          <ion-item>\\n            <ion-label position=\\\"fixed\\\">用户密码</ion-label>\\n            <ion-input name=\\\"pwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.pwd\\\"></ion-input>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label position=\\\"fixed\\\">确认密码</ion-label>\\n            <ion-input name=\\\"cpwd\\\" type=\\\"password\\\" required [(ngModel)]=\\\"user.cpwd\\\"></ion-input>\\n          </ion-item>\\n          <ion-text text-left color=\\\"danger\\\" *ngIf=\\\"pwdForm.submitted\\\">\\n            <p [hidden]=\\\"pwdIsSame\\\" padding-start>两次密码不一致</p>\\n          </ion-text>\\n          <div padding-horizontal>\\n            <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"pwdForm.invalid\\\">提交</ion-button>\\n          </div>\\n        </ion-list>\\n      </form>\\n    </ion-slide>\\n  </ion-slides>\\n</ion-content>\\n\"","module.exports = \"\"","import {Component, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {AlertController, MenuController, Slides, ToastController} from '@ionic/angular';\nimport {AuthenticationCodeService} from '../../services/authentication-code.service';\nimport {Router} from '@angular/router';\nimport {UserService} from '../../services/user.service';\nimport {Location} from '@angular/common';\n@Component({\n  selector: 'app-forgot-password',\n  templateUrl: './forgot-password.page.html',\n  styleUrls: ['./forgot-password.page.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ForgotPasswordPage implements OnInit {\n  @ViewChild('forgotPasswordSlides') forgotPasswordSlides: Slides;\n  user = {\n    forgotPhone: '',\n    code: '',\n    pwd: '',\n    cpwd: ''\n  };\n  codeIsRight = true;\n  pwdIsSame = true;\n  constructor(private authenticationCodeService: AuthenticationCodeService, private router: Router,\n              private userService: UserService, private toastController: ToastController,\n              private alertController: AlertController, private menuController: MenuController,\n              private location: Location) { }\n  ngOnInit() {\n      this.forgotPasswordSlides.lockSwipeToNext(true);\n  }\n  ionViewDidEnter() {\n      this.menuController.enable(false);\n  }\n  ionViewDidLeave() {\n      this.menuController.enable(true)\n  }\n  next() {\n      this.forgotPasswordSlides.lockSwipeToNext(false);\n      this.forgotPasswordSlides.slideNext();\n      this.forgotPasswordSlides.lockSwipeToNext(true);\n  }\n  previous() {\n      this.forgotPasswordSlides.lockSwipeToNext(false);\n      this.forgotPasswordSlides.slidePrev();\n      this.forgotPasswordSlides.lockSwipeToNext(true);\n  }\n  async onSendPhone() {\n    if (this.userService.check(this.user.forgotPhone)) {\n        this.authenticationCodeService.createCode(4, this.user.forgotPhone);\n        this.next();\n    } else {\n        let toast = await this.toastController.create({\n            message: '该手机号还未注册',\n            duration: 3000\n        });\n        toast.present();\n    }\n  }\n  onSendCode() {\n    if (this.authenticationCodeService.validate(this.user.code)) {\n      this.next();\n    } else {\n      // 验证码错误\n        this.codeIsRight = false;\n    }\n  }\n  async onSendPwd() {\n    if (this.user.pwd === this.user.cpwd) {\n        // 注册成功，保存数据\n        if (this.userService.update(this.user.forgotPhone, this.user.pwd)) {\n            let alert =await this.alertController.create({\n                header: '提示',\n                message: '密码修改成功！',\n                buttons: ['确定']\n            });\n            alert.present();\n            this.router.navigateByUrl('login');\n        }\n    } else {\n        this.pwdIsSame = false;\n    }\n  }\n  back() {\n      this.location.back();\n  }\n}\n"],"sourceRoot":""}