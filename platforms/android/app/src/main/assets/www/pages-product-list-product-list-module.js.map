{"version":3,"sources":["webpack:///./src/app/pages/product-list/product-list.module.ts","webpack:///./src/app/pages/product-list/product-list.page.html","webpack:///./src/app/pages/product-list/product-list.page.scss","webpack:///./src/app/pages/product-list/product-list.page.ts"],"names":[],"mappings":"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","file":"pages-product-list-product-list-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProductListPage } from './product-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProductListPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProductListPage]\n})\nexport class ProductListPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"light\\\" (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>商品列表</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content no-padding>\\n  <ion-toolbar color=\\\"light\\\">\\n    <ion-searchbar placeholder=\\\"请输入商品名称、拼音、数字\\\"\\n                   [(ngModel)]=\\\"queryTerm\\\"\\n                   showCancelButton=\\\"false\\\"\\n                   (ionInput)=\\\"onInput($event)\\\" >\\n    </ion-searchbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button fill=\\\"outline\\\" color=\\\"primary\\\" size=\\\"small\\\">商品盘点</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"onRefresh($event)\\\">\\n    <ion-refresher-content\\n            pullingIcon=\\\"arrow-dropdown\\\"\\n            pullingText=\\\"下拉可以刷新\\\"\\n            refreshingSpinner=\\\"circles\\\"\\n            refreshingText=\\\"正在加载...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n  <ion-grid *ngIf=\\\"totalCount == 0\\\">\\n    <img src=\\\"assets/img/commodity_no.png\\\" alt=\\\"\\\">\\n    <ion-item lines=\\\"none\\\"><ion-text color=\\\"medium\\\">您还没有任何商品信息</ion-text></ion-item>\\n    <ion-item lines=\\\"none\\\"><ion-text color=\\\"medium\\\">您可以</ion-text></ion-item>\\n    <ion-button type=\\\"button\\\" expand=\\\"full\\\" color=\\\"primary\\\" href=\\\"/addProduct\\\">新增商品</ion-button>\\n  </ion-grid>\\n  <ion-grid *ngIf=\\\"totalCount > 0\\\" color=\\\"light\\\" no-padding>\\n    <ion-item>\\n      <ion-text>总正库存 {{stock}} 件，总成本 {{price | number:'1.2-2'}} 元</ion-text>\\n    </ion-item>\\n    <ion-item *ngFor=\\\"let p of product\\\" no-padding routerLink=\\\"/productDesc\\\" [queryParams]=\\\"{id: p.id}\\\">\\n      <ion-col size=\\\"2\\\">\\n        <img src=\\\"assets/img/c_goodspicture.png\\\" alt=\\\"\\\">\\n      </ion-col>\\n      <ion-col size=\\\"9\\\">\\n        <ion-row>{{p.name}}</ion-row>\\n        <ion-row><ion-text color=\\\"danger\\\">￥{{p.price | number:'1.2-2'}}</ion-text></ion-row>\\n        <ion-row>\\n          <ion-text color=\\\"medium\\\">条码:{{p.barcode}}</ion-text>\\n          <ion-text padding-start=\\\"5px\\\" color=\\\"medium\\\">库存:{{p.stock}}</ion-text>\\n        </ion-row>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\">\\n            <ion-icon name=\\\"share\\\"></ion-icon>\\n      </ion-col>\\n    </ion-item>\\n  </ion-grid>\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"onInfinite($event)\\\">\\n    <ion-infinite-scroll-content\\n            loadingSpinner=\\\"bubbles\\\"\\n            loadingText=\\\"加载更多商品数据...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\"","module.exports = \"\"","import {Component, NgZone, OnInit} from '@angular/core';\nimport {AlertController, LoadingController} from '@ionic/angular';\nimport {AjaxResult} from '../../shared/ajax-result';\nimport {ProductService} from '../../services/product.service';\nimport {Product} from '../../shared/product';\nimport {Location} from '@angular/common';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.page.html',\n  styleUrls: ['./product-list.page.scss'],\n})\nexport class ProductListPage implements OnInit {\n  currentIndex = 1;\n  totalCount = 0;\n  product: Array<Product>;\n  queryTerm = '';\n  stock = 0;\n  price = 0;\n  constructor(private loadingController: LoadingController, private productService: ProductService,\n              private zone: NgZone, private alertController: AlertController, private location: Location,\n              private router: Router) { }\n\n  async ngOnInit() {\n  }\n  async ionViewWillEnter() {\n      const loading = await this.loadingController.create({\n          message: '正在加载数据，请稍候...',\n          spinner: 'bubbles',\n      });\n      loading.present();\n      try {\n          this.stock = 0;\n          this.price = 0;\n          const ajaxResult: AjaxResult = await this.productService.getList(this.currentIndex, 10);\n          this.totalCount = ajaxResult.result.totalCount;\n          this.product = ajaxResult.result.product;\n          for (let x of this.product) {\n              this.price += +x.price;\n              this.stock += +x.stock;\n          }\n          loading.dismiss();\n      } catch (error) {\n          console.log(error);\n      }\n  }\n  async onInput(e) {\n      this.currentIndex = 1;\n      if (e.target.value == '') {\n          try {\n              this.stock = 0;\n              this.price = 0;\n              const ajaxResult: AjaxResult = await this.productService.getList(this.currentIndex, 10);\n              this.zone.run(() => {\n                  this.totalCount = ajaxResult.result.totalCount;\n                  this.product = ajaxResult.result.product;\n                  for (let x of this.product) {\n                      this.price += +x.price;\n                      this.stock += +x.stock;\n                  }\n              });\n          } catch (error) {\n              console.log(error);\n          }\n      } else {\n          try {\n              this.stock = 0;\n              this.price = 0;\n              const ajaxResult: AjaxResult = await this.productService.getListByCategoryId(this.currentIndex, 10, e.target.value);\n              this.totalCount = ajaxResult.result.totalCount;\n              this.product = ajaxResult.result.product;\n              for (let x of this.product) {\n                  this.price += +x.price;\n                  this.stock += +x.stock;\n              }\n          } catch (error) {\n              console.log(error);\n          }\n      }\n  }\n  async onRefresh(e) {\n      this.currentIndex = 1;\n      let refresher = e.target;\n      try {\n          this.stock = 0;\n          this.price = 0;\n          const ajaxResult: AjaxResult = await this.productService.getList(this.currentIndex, 10);\n          this.totalCount = ajaxResult.result.totalCount;\n          this.product = ajaxResult.result.product;\n          for (let x of this.product) {\n              this.price += +x.price;\n              this.stock += +x.stock;\n          }\n      } catch (error) {\n          console.log(error);\n      }\n      refresher.complete();\n  }\n  async onInfinite(e) {\n      let infiniteScroll = e.target;\n      this.currentIndex++;\n      const ajaxResult: AjaxResult = await this.productService.getList(this.currentIndex, 10);\n      console.log();\n      if (ajaxResult.result.totalCount - (this.currentIndex - 1) * 10 < 0) {\n          let alert = await this.alertController.create({\n              header: '提示',\n              message: '已经是最后一页',\n              buttons: ['确定']\n          });\n          alert.present();\n      } else {\n          this.stock = 0;\n          this.price = 0;\n          this.totalCount = ajaxResult.result.totalCount;\n          this.product = ajaxResult.result.product;\n          for (let x of this.product) {\n              this.price += +x.price;\n              this.stock += +x.stock;\n          }\n      }\n      infiniteScroll.complete();\n  }\n  back() {\n      this.router.navigateByUrl('home');\n  }\n}\n"],"sourceRoot":""}