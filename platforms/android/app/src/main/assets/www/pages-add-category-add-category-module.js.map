{"version":3,"sources":["webpack:///./src/app/pages/add-category/add-category.module.ts","webpack:///./src/app/pages/add-category/add-category.page.html","webpack:///./src/app/pages/add-category/add-category.page.scss","webpack:///./src/app/pages/add-category/add-category.page.ts"],"names":[],"mappings":"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","file":"pages-add-category-add-category-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddCategoryPage } from './add-category.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddCategoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AddCategoryPage]\n})\nexport class AddCategoryPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"light\\\" (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>返回\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title *ngIf=\\\"id==0\\\">新增大分类</ion-title>\\n    <ion-title *ngIf=\\\"id!=0\\\">新增小分类</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <form (ngSubmit)=\\\"onSave()\\\" #addCategoryForm=\\\"ngForm\\\" novalidate>\\n    <ion-list lines=\\\"none\\\">\\n      <ion-item *ngIf=\\\"id==0\\\">\\n        <ion-label position=\\\"fixed\\\">大分类</ion-label>\\n        <ion-input name=\\\"name\\\" type=\\\"text\\\" placeholder=\\\"商品大分类名称\\\" [(ngModel)]=\\\"category.name\\\"></ion-input>\\n      </ion-item>\\n      <ion-item *ngIf=\\\"id!=0\\\">\\n        <ion-text>{{name}}</ion-text>\\n      </ion-item>\\n      <ion-item *ngFor=\\\"let c of children\\\">\\n        <ion-label position=\\\"fixed\\\">小分类</ion-label>\\n        <ion-input name=\\\"children{{c.id}}\\\" type=\\\"text\\\" placeholder=\\\"商品小分类名称\\\" [(ngModel)]=\\\"c.name\\\"></ion-input>\\n      </ion-item>\\n      <ion-item detail=\\\"false\\\" (click)=\\\"onAddSubCategory()\\\">\\n        <ion-icon slot=\\\"start\\\" name='add-circle' color=\\\"primary\\\"></ion-icon>\\n        <ion-label color=\\\"primary\\\">新增小分类</ion-label>\\n      </ion-item>\\n      <div padding-horizontal>\\n        <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"addCategoryForm.invalid\\\">保存</ion-button>\\n      </div>\\n    </ion-list>\\n  </form>\\n</ion-content>\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {Category} from '../../shared/category';\nimport {CategoryService} from '../../services/category.service';\nimport {AlertController, ToastController} from '@ionic/angular';\nimport {Location} from '@angular/common';\n\n@Component({\n  selector: 'app-add-category',\n  templateUrl: './add-category.page.html',\n  styleUrls: ['./add-category.page.scss'],\n})\nexport class AddCategoryPage implements OnInit {\n  id: number;\n  name: string;\n  children: Array<Category> = [];\n  category: Category = {\n      id: 0,\n      name: '',\n      children: []\n  };\n  increaseId = 1;\n  constructor(private activatedRoute: ActivatedRoute, private categoryService: CategoryService,\n              private toastController: ToastController, private alertController: AlertController,\n              private router: Router, private location: Location) {\n      activatedRoute.queryParams.subscribe(queryParams => {\n          this.id = queryParams.id;\n          this.name = queryParams.name;\n      });\n      const newChildren: Category = {\n              id: this.increaseId++,\n              name: '',\n              children: []\n          };\n      this.children.push(newChildren);\n  }\n\n  ngOnInit() {\n  }\n  onAddSubCategory() {\n      const newChildren: Category = {\n          id: this.increaseId++,\n          name: '',\n          children: []\n      };\n      this.children.push(newChildren);\n  }\n  onSave() {\n      if (this.id == 0) {\n          this.onSavaAddCategory();\n      } else {\n          this.onSavaAddSubCategory();\n      }\n  }\n  async onSavaAddCategory() {\n      this.category.children = this.children;\n      if (this.categoryService.insert(this.category)) {\n          let alert = await this.alertController.create({\n              header: '提示',\n              message: '新增成功',\n              buttons: ['确定']\n          });\n          alert.present();\n          this.router.navigateByUrl('categoryList');\n      } else {\n          let toast = await this.toastController.create({\n              message: '请注意商品大类或者小类不能重复！',\n              duration: 3000\n          });\n          toast.present();\n      }\n  }\n  async onSavaAddSubCategory() {\n      this.category.children = this.children;\n      this.category.id = this.id;\n      let data = await this.categoryService.insertSubCategory(this.category);\n     if (data.success) {\n         let alert = await this.alertController.create({\n             header: '提示',\n             message: '新增成功',\n             buttons: ['确定']\n         });\n         alert.present();\n         this.router.navigateByUrl('categoryList');\n     } else {\n         let toast = await this.toastController.create({\n             message: '请注意商品大类或者小类不能重复！',\n             duration: 3000\n         });\n         toast.present();\n     }\n  }\n  back() {\n      this.location.back();\n  }\n}\n"],"sourceRoot":""}